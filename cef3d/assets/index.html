<!DOCTYPE html>
<html>
    <head>
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="app.css">
    </head>

<body>
    <div class="container">
        <div class="leftPanel">
            <div class="album-bg" id="albumCover">
                <div class="title-overlay">
                    <div class="song" id="songName">
                        unknown
                    </div>
                    <div class="artist" id="artistName">
                        unknown
                    </div>
                </div>
            </div>
        </div>
        <div class="right-panel" id="artistCover">
            <div class="right-panel-container">
            <div class="user-container">
                <div class="name-panel">
                    <h2 id="userName">arkenthera</h2>
                </div>
                <div class="user-avatar" id="userAvatar">
                </div>                
            </div>
            <div class="user-info-panel">
                <div class="item">
                    <div class="item-upper">
                        Scrobbles
                    </div>
                    <div class="item-lower" id="userScrobbles">
                        469863
                    </div>
                </div>
                <div class="item">
                    <div class="item-upper">
                        Artists
                    </div>
                    <div class="item-lower" id="userArtists">
                        0
                    </div>
                </div>
                <div class="item">
                    <div class="item-upper">
                        Albums
                    </div>
                    <div class="item-lower" id="userAlbums">
                        0
                    </div>
                </div>
            </div>
                <div class="pvt-panel">
                    <div class="pvt-title">
                        Previous Tracks
                    </div>
                    <div class="pvt-item-container" id="pvt">

                    </div>
                </div>
        </div>
        </div>
    </div>
    <script>
        if(!window.cppSongName)
            window.cppSongName =  "im broke";

        if(!window.cppArtistName)
            window.cppArtistName = "";

        if(!window.cppArtistScrobbles)
            window.cppArtistScrobbles = -1;

        if(!window.cppAlbumScrobbles)
            window.cppAlbumScrobbles = -1;
        
        if(!window.cppTotalScrobbles)
            window.cppTotalScrobbles = -1;
        
        if(!window.cppGenre)
            window.cppGenre = "";

        if(!window.cppUserName)
            window.cppUserName = "arkenthera";
        
        if(!window.cppUserAvatar)
            window.cppUserAvatar = "avatar.gif";

        if(!window.cppUserArtistCount)
            window.cppUserArtistCount = -1;
        
        if(!window.cppUserScrobbles)
            window.cppUserScrobbles = -1;

        if(!window.cppUserFavourites)
            window.cppUserFavourites = -1;

        if(!window.cppAlbumCover)
            window.cppAlbumCover = "artist_not_found.jpg"

        if(!window.cppArtistCover)
            window.cppArtistCover = "artist_not_found.jpg"

         var albumCoverCount = 3;

         for(var i = 0; i < albumCoverCount; i++) {
             if(!window["prev_track_" + i + "_cover"])
                 window["prev_track_" + i + "_cover"] = "artist_not_found.jpg";

             if(!window["prev_track_" + i + "_text"])
                 window["prev_track_" + i + "_text"] = "broken";

             createPrevTrack({ image: window["prev_track_" + i + "_cover"], text: window["prev_track_" + i + "_text"]});
         }
        
         function createPrevTrack(pvtinfo) {
             var txt = document.createElement("div");
             txt.className = "pvt-item";
             txt.innerHTML = "<div class=\"pvt-cover\" style=\"background-image: url(\'"+ pvtinfo.image+ "\')\";></div><div class=\"pvt-text\">" + pvtinfo.text + "</div>"
             var parent = document.getElementById('pvt');
             parent.insertBefore(txt, parent.lastChild);
         }

        function setInfo() {
            document.getElementById("songName").innerText = window.cppSongName;
            document.getElementById("artistName").innerText = window.cppArtistName;
            // document.getElementById("artistScrobbles").innerText = window.cppArtistScrobbles;
            // document.getElementById("albumScrobbles").innerText = window.cppAlbumScrobbles;
            // document.getElementById("totalScrobbles").innerText = window.cppTotalScrobbles;
            // document.getElementById("genre").innerText = window.cppGenre;

            document.getElementById("userName").innerText = window.cppUserName;
            document.getElementById("userAvatar").style = "background-image: url('"+  window.cppUserAvatar + "');";
            document.getElementById("userArtists").innerText = window.cppUserArtistCount;
            document.getElementById("userAlbums").innerText = window.cppUserFavourites;
            document.getElementById("userScrobbles").innerText = window.cppUserScrobbles;
            //document.getElementById("footerText").innerText = "http://last.fm/user/" + window.cppUserName;

            document.getElementById("albumCover").style = "background-image: url('"+  window.cppAlbumCover + "');";
            document.getElementById("artistCover").style = "background-image: url('"+  window.cppArtistCover + "');";
        }
        setInfo();

        //window.app.exitApp();

        setTimeout(function() { window.app.exitApp();}, 300);

//        window.addEventListener("DOMContentLoaded", function(event) {
//            window.app.exitApp();
//        })
    </script>
</body>
</html>